FROM mcr.microsoft.com/windows/servercore:1803

RUN powershell -Command `wget 'http://javadl.oracle.com/webapps/download/AutoDL?BundleId=210185' -Outfile 'C:\jreinstaller.exe' ; ` \
    Start-Process -filepath C:\\jreinstaller.exe -passthru -wait -argumentlist "/s,INSTALLDIR=c:\Java\jre1.8.0_91" ; ` \
    del C:\\jreinstaller.exe

ENV JAVA_HOME c:\\Java\\jre1.8.0_91

RUN setx PATH %PATH%;%JAVA_HOME%\bin

ENV HOME /jenkins

ENV JENKINS_VERSION 2.121.1

RUN mkdir \jenkins

RUN powershell -Command "wget -Uri https://updates.jenkins-ci.org/download/war/2.121.1/jenkins.war -UseBasicParsing -OutFile /jenkins/jenkins.war"

CMD java -jar c:\jenkins\jenkins.war
