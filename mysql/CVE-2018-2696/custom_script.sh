#!/bin/bash

# 修改配置文件以允许远程登录
sed -i 's/bind-address/#bind-address/g' /etc/mysql/my.cnf

# 设置远程访问权限
mysql -u root -p"${MYSQL_ROOT_PASSWORD}" -e "GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '${MYSQL_ROOT_PASSWORD}' WITH GRANT OPTION; FLUSH PRIVILEGES;"

# 启动 MySQL 服务
exec docker-entrypoint.sh "$@"
